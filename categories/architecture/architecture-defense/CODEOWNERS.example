/**
 * J4: REFLEX + Team Ownership
 *
 * CODEOWNERS configuration for architecture governance.
 * Ensures that architecture violations require approval from module owners.
 *
 * How it works:
 * - Each module has designated owners who must approve changes
 * - Architecture rule files require architecture team approval
 * - Violations cannot be merged without owner sign-off
 *
 * Docs: https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners
 */

# ========================================
# ARCHITECTURE GOVERNANCE (Requires Architecture Team Approval)
# ========================================
# These files control architecture rules - changes need expert review
/dependency-cruiser.config.cjs      @architecture-team @tech-lead
/dependency-cruiser-report.json     @architecture-team
/.github/workflows/architecture.yml @architecture-team @devops-team
/tsconfig.json                      @architecture-team

# Backend architecture rules
/src/test/java/**/*Architecture*    @architecture-team @backend-lead
/build.gradle                       @architecture-team @backend-lead
/gradle/archunit.gradle             @architecture-team

# ========================================
# FEATURE MODULES (By Feature Team)
# ========================================

# User Management Feature
/src/features/user-management/**    @user-management-team
/src/features/user-management/manifest.config.ts @user-management-lead

/src/features/user-management/internal/**  @user-management-lead @senior-dev
/src/features/user-management/components/** @user-management-team @ui-team
/src/features/user-management/services/**   @user-management-team @backend-team

# Order Processing Feature
/src/features/orders/**             @orders-team
/src/features/orders/manifest.config.ts     @orders-lead
/src/features/orders/internal/**   @orders-lead @senior-dev

# Product Catalog Feature
/src/features/products/**           @product-team
/src/features/products/manifest.config.ts   @product-lead

# Authentication Feature
/src/features/auth/**               @security-team @auth-team
/src/features/auth/manifest.config.ts       @security-lead

# ========================================
# SHARED LAYERS (Cross-Functional Teams)
# ========================================

# Design System / UI Components
/src/shared/design-system/**        @ui-team @design-system-team
/src/shared/design-system/button/** @ui-lead
/src/shared/design-system/input/**  @ui-lead

# Data Layer (Requires Data Team + Architecture Approval)
/src/data/database/**               @data-team @architecture-team
/src/data/models/**                 @data-team
/src/data/repositories/**           @data-team

# API Layer
/src/api/**                         @backend-team @api-team

# Utils (High Risk - Changes Affect Everyone)
/src/shared/utils/**                @architecture-team @tech-lead
/src/shared/validation/**           @architecture-team

# Types (Changes Can Break Everything)
/src/shared/types/**                @architecture-team @tech-lead

# ========================================
# TESTING (Quality Team)
# ========================================
/src/test/**                        @quality-assurance-team
/src/test/fixtures/**               @qa-team
/cypress/**                         @qa-team @frontend-lead
/playwright/**                      @qa-team @frontend-lead

# ========================================
# INFRASTRUCTURE & DEVOPS
# ========================================
/docker/**                          @devops-team
/kubernetes/**                      @devops-team
/terraform/**                       @devops-team @sre-team
/.github/workflows/**               @devops-team
/scripts/**                         @devops-team @tech-lead

# ========================================
# DOCUMENTATION
# ========================================
/docs/architecture/**               @architecture-team @tech-lead
/docs/api/**                        @api-team @documentation-team
/README.md                          @tech-lead
/CONTRIBUTING.md                    @tech-lead
/ARCHITECTURE.md                    @architecture-team

# ========================================
# CONFIGURATION FILES (Critical)
# ========================================
/package.json                       @tech-lead @architecture-team
/tsconfig.json                      @architecture-team
/.eslintrc.js                       @architecture-team @frontend-lead
/.prettierrc                        @architecture-team
/nx.json                            @architecture-team
/turbo.json                         @architecture-team

# ========================================
# EMERGENCY OVERRIDES (Requires CTO Approval)
# ========================================
# If you need to bypass architecture rules, CTO must approve
**/BYPASS_ARCHITECTURE**            @cto @architecture-team @security-team

# ========================================
# DEFAULT OWNERS (Fallback)
# ========================================
# Catch-all for files not explicitly listed above
*                                   @tech-lead

# ========================================
# SPECIAL PATTERNS
# ========================================

# All manifest files require feature lead + architecture approval
**/manifest.config.ts               @architecture-team

# All internal directories require senior dev approval
**/internal/**                      @senior-dev @tech-lead

# All test files for architecture rules
**/*.architecture.test.ts           @architecture-team
**/*.architecture.test.java         @architecture-team

# Migration files (high risk)
**/migrations/**                    @database-admin @data-team @architecture-team

# Security-sensitive files
**/auth/**                          @security-team
**/password/**                      @security-team
**/crypto/**                        @security-team
**/token/**                         @security-team

# ========================================
# EXEMPTIONS (Use Sparingly!)
# ========================================
# Temporary files
*.tmp                               @tech-lead
*.draft                             @author

# Generated files (no approval needed)
dist/**                             @tech-lead
build/**                            @tech-lead
node_modules/**                     @tech-lead
*.generated.*                       @tech-lead
